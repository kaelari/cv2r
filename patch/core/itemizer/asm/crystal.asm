PHP
TYA
PHA

LDY #$00

CHECK LDA $6110,Y
CMP #$00
BEQ CRYS
CMP $7F
BNE NEXT

LDA $6111,Y
CMP *$30
BNE NEXT

LDA $6112,Y
CMP *$50
BNE NEXT

LDA *$51
AND #$7
STA $6000
LDA $6113,Y
CMP $6000
BNE NEXT

BEQ DONE

NEXT CPY #$80
BEQ CRYS
INY
INY
INY
INY
BNE CHECK

CRYS 
LDA $7F
STA $6110,Y
LDA *$30
STA $6111,Y
LDA *$50
STA $6112,Y
LDA *$51
AND #$7
STA $6113,Y

; if ($7F == 0x26 || $7F < 0x1D || $7F > 0x37)  {
;   $600E = 0x01
; }
LDA *$7F
CMP #$26
BCC MARK
CMP #$38
BCC NOMARK
MARK STA $600E

NOMARK LDA *$91
AND #$60
CMP #$60
BEQ DONE
LDA *$91
CLC
ADC #$20
STA *$91

DONE
PLA
TAY
PLP

LDA $91

RTS
