PHP
TYA
PHA
TXA
PHA
LDA *$52
PHA
LDA *$53
PHA

LDA *$51
AND #$07
STA *$52

LDA #$00
LDX #$00
; carry
CPX *$30
BEQ AREA
LDA #$30
INX
OBJSET CPX *$30
BEQ AREA
CLC
ADC #$30
INX
BNE OBJSET

AREA CLC
ADC *$52
STA *$52

LDX *$30

CPX #$03
BNE OBJ12
LDA *$50
STA *$53
ASL A
ASL A
CLC
ADC *$53
BVC SUMVAL

OBJ12 CPX #$01
BEQ DOIT
CPX #$02
BNE OBJ045
DOIT LDA *$50
ASL A
ASL A
BVC SUMVAL

OBJ045 LDA *$50
ASL A
BVC SUMVAL

SUMVAL CLC
ADC *$52
STA *$52
TAY

LDA $B720,Y
AND #$1F
STA $102

PLA
STA *$53
PLA
STA *$52
PLA
TAX
PLA
TAY
PLP

LDA $102

RTS